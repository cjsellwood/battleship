(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,function(t,e,a){t.exports={Container:"Game_Container__sKSbT",Grid:"Game_Grid__Ya4sG",Turn:"Game_Turn__36u0M",Label:"Game_Label__2qwWx",Buttons:"Game_Buttons__hZqgn",Winner:"Game_Winner__3msKw",HideRotate:"Game_HideRotate__1ZQFU"}},,,function(t,e,a){t.exports=a.p+"static/media/fire.a0d39ca3.png"},,,function(t,e,a){t.exports={Ships:"Ships_Ships__12LO7",VerticalShips:"Ships_VerticalShips__3sTvK",HideShips:"Ships_HideShips__2C2FZ"}},function(t,e,a){t.exports={Row:"ComputerGrid_Row__dqX1G",Column:"ComputerGrid_Column__2RRpk"}},function(t,e,a){t.exports={Row:"HumanGrid_Row__bI5ZN",Column:"HumanGrid_Column__3RGyM",ShipGray:"HumanGrid_ShipGray__Ap_ZS"}},,,function(t,e,a){t.exports={Top:"App_Top__1EDUa"}},function(t,e,a){t.exports=a(19)},,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),c=(a(18),a(2)),u=a(3),l=a(6),s=a(5),m=a(12),d=a.n(m),p=function(t){var e=1;switch(t){case"Carrier":e=5;break;case"Battleship":e=4;break;case"Destroyer":case"Submarine":e=3;break;case"PatrolBoat":e=2}var a=Array(e).fill(""),n=!1,r=!1;return{damage:a,sunk:n,length:e,placed:r,getLength:function(){return e},getName:function(){return t},getDamage:function(){return a},hit:function(t){return a[t]="x",a},isSunk:function(){return n=!a.includes("")},getPlaced:function(){return r},setPlaced:function(){r=!0}}},g=function(){for(var t={Carrier:p("Carrier"),Battleship:p("Battleship"),Destroyer:p("Destroyer"),Submarine:p("Submarine"),PatrolBoat:p("PatrolBoat")},e=[],a=0;a<10;a++)e.push(Array(10).fill(""));var n=function(t,a,n,r){if(!n||!r)return!1;if("Horizontal"===a){for(var o=0;o<t.length;o++){if(r-1+o>=10||r-1+o<0)return!1;if(""!==e[n-1][r-1+o])return!1}for(var i=0;i<t.length;i++)e[n-1][r-1+i]=t.getName()+i;return e}for(var c=0;c<t.length;c++){if(n-1+c>=10||n-1+c<0)return!1;if(""!==e[n-1+c][r-1])return!1}for(var u=0;u<t.length;u++)e[n-1+u][r-1]=t.getName()+u;return e};return{ships:t,grid:e,getGrid:function(){return e},placeShip:n,receiveAttack:function(t,a){if(""===e[t-1][a-1])return e[t-1][a-1]="x",!0;if("x"===e[t-1][a-1]||"Hit"===e[t-1][a-1])return!1;var n=e[t-1][a-1],r=n.slice(0,n.length-1),o=n[n.length-1];return p(r).hit(o),e[t-1][a-1]="Hit",!0},allSunk:function(){var t=!0;return e.forEach((function(e){e.forEach((function(e){""!==e&&"x"!==e&&"Hit"!==e&&(t=!1)}))})),t},autoPlaceShips:function(){for(var e in t)if(!t[e].getPlaced()){for(var a=void 0,r=null,o=Math.random()>.5?"Horizontal":"Vertical";!n(t[e],o,a,r);)a=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;t[e].setPlaced()}}}},h=function(t){return{getName:function(){return t},attack:function(t,e,a){return t.gameboard.receiveAttack(e,a)},gameboard:g(),computerAttack:function(t){for(var e=Math.floor(10*Math.random())+1,a=Math.floor(10*Math.random())+1,n=t.gameboard.receiveAttack(e,a);!1===n;)e=Math.floor(10*Math.random())+1,a=Math.floor(10*Math.random())+1,n=t.gameboard.receiveAttack(e,a);return n}}},f=a(1),b=a.n(f),v=a(8),y=a.n(v),S=a(4),k=a.n(S),E=function(t){return t.grid.map((function(e,a){return r.a.createElement("div",{key:a+1,className:y.a.Row},e.map((function(e,n){var o=[y.a.Column],i=null;return"Hit"===e&&(i={backgroundColor:"black",backgroundImage:"url(".concat(k.a,")"),backgroundSize:"cover"}),r.a.createElement("div",{onClick:function(e){return t.clickBoard(e)},row:a+1,column:n+1,key:"".concat(a," ").concat(n),className:o.join(" "),style:i},"x"===e?e:null)})))}))},w=a(9),_=a.n(w),C=function(t){return t.grid.map((function(t,e){return r.a.createElement("div",{key:e+1,className:_.a.Row},t.map((function(t,a){var n=[_.a.Column],o=null;return"Hit"===t?o={backgroundColor:"black",backgroundImage:"url(".concat(k.a,")"),backgroundSize:"cover"}:"x"!==t&&""!==t&&(o={backgroundColor:"gray"}),r.a.createElement("div",{row:e+1,column:a+1,key:"".concat(e," ").concat(a),className:n.join(" "),style:o,drop:"droppable"},"x"===t?t:null)})))}))},G=a(7),N=a.n(G),R=function(t){var e=[];for(var a in t.ships){for(var n=[],o=0;o<t.ships[a].length;o++)n.push(r.a.createElement("div",{name:t.ships[a].getName(),position:o,key:t.ships[a].getName()+o}));e.push(r.a.createElement("div",{onMouseDown:function(e){return t.dragStart(e)},key:t.ships[a].getName()},n))}var i=[];return i="Vertical"===t.orientation?[N.a.VerticalShips]:[N.a.Ships],null!==t.currentTurn&&(console.log(t.currentTurn),i.push(N.a.HideShips)),r.a.createElement("div",{className:i.join(" ")},e)},A=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={human:h("Human"),computer:h("Computer"),currentTurn:null,orientation:"Horizontal",disableRotation:!1,startGame:!1,counter:0,disableStartBtn:!1,winner:null},t.clickBoard=function(e){if("Human"===t.state.currentTurn&&"x"!==e.target.textContent&&"black"!==e.target.style.backgroundColor){var a=t.state.computer,n=e.target.getAttribute("row"),r=e.target.getAttribute("column");t.state.human.attack(a,n,r)&&t.setState({computer:a,currentTurn:"Computer"}),a.gameboard.allSunk()&&t.setState({winner:"Human"}),setTimeout((function(){var e=t.state.human;t.state.computer.computerAttack(e),t.setState({human:e,currentTurn:"Human"}),e.gameboard.allSunk()&&t.setState({winner:"Computer"})}),1e3)}},t.changeOrientation=function(){"Horizontal"===t.state.orientation?t.setState({orientation:"Vertical"}):t.setState({orientation:"Horizontal"})},t.startGame=function(){t.setState({currentTurn:"Human",disableRotation:!0,startGame:!1,disableStartBtn:!0}),t.state.computer.gameboard.autoPlaceShips()},t.autoPlace=function(){t.state.human.gameboard.autoPlaceShips();var e=t.state.human;e.gameboard.ships=null,t.setState({startGame:!0,human:e,disableRotation:!0})},t.handleDragStart=function(e){"Horizontal"===t.state.orientation?function(){t.setState({disableRotation:!0}),console.log(e.target),console.log(e.currentTarget);var a=e.currentTarget,n=e.clientX-a.getBoundingClientRect().left;n+=.005*window.innerWidth;var r=e.clientY-a.getBoundingClientRect().top;r+=.005*window.innerWidth;var o=null,i=e.target.getAttribute("name"),c=Number(e.target.getAttribute("position")),u=t.state.human.gameboard.ships[i].getLength(),l={row:null,column:null},s=!1,m=[],d=function(t){a.style.opacity="0.7",a.style.position="absolute",a.style.left=t.pageX-n+"px",a.style.top=t.pageY-r+"px",a.style.display="none";var e=document.elementFromPoint(t.clientX,t.clientY);if(a.style.display="grid",e){var i=e.closest("[drop=droppable]");o!==i&&(o&&p(o),(o=i)&&g(o))}};document.addEventListener("mousemove",d);var p=function(t){var e=Number(t.getAttribute("row")),a=Number(t.getAttribute("column"))-c;if(!(a<=0||a+u-2>=10)){for(var n=[],r=a;r<a+u;r++)n.push(document.querySelector('[drop="droppable"][row="'.concat(e,'"][column="').concat(r,'"]')));var o=!1;n.forEach((function(t){"gray"===t.style.backgroundColor&&(o=!0)})),o||(n.forEach((function(t){t.style.backgroundColor="#77b4ee"})),s=!1)}},g=function(t){var e=Number(t.getAttribute("row")),a=Number(t.getAttribute("column"))-c;if(!(a<=0||a+u-2>=10)){for(var n=[],r=a;r<a+u;r++)n.push(document.querySelector('[drop="droppable"][row="'.concat(e,'"][column="').concat(r,'"]')));var o=!1;n.forEach((function(t){"gray"===t.style.backgroundColor&&(o=!0)})),o||(n.forEach((function(t){t.style.backgroundColor="lightGray"})),s=!0,m=n,l.row=e,l.column=a)}};document.addEventListener("mouseup",(function e(n){if(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),s){var r=t.state.counter+1;console.log("counter",r),t.setState({disableRotation:!1,counter:r}),5===r&&t.setState({startGame:!0,disableRotation:!0}),a.style.display="none",t.state.human.gameboard.placeShip(t.state.human.gameboard.ships[i],t.state.orientation,l.row,l.column),console.log(t.state.human.gameboard.getGrid());var o=t.state.human;o.gameboard.ships[i].setPlaced(),t.setState({human:o}),console.log(m),m.forEach((function(t){t.style.backgroundColor="gray"}))}else a.style.position="static",a.style.opacity=1,t.setState({disableRotation:!1})}))}():function(){t.setState({disableRotation:!0});var a=e.currentTarget;console.log(e.clientX),console.log(e.clientY),console.log(a.getBoundingClientRect());var n=e.clientX-a.getBoundingClientRect().left;n+=.005*window.innerWidth;var r=e.clientY-a.getBoundingClientRect().top;r+=.005*window.innerWidth;var o=null,i=e.target.getAttribute("name"),c=Number(e.target.getAttribute("position")),u=t.state.human.gameboard.ships[i].getLength(),l={row:null,column:null},s=!1,m=[],d=function(t){a.style.opacity="0.5",a.style.position="absolute",a.style.left=t.pageX-n+"px",a.style.top=t.pageY-r+"px",a.style.display="none";var e=document.elementFromPoint(t.clientX,t.clientY);if(a.style.display="grid",e){var i=e.closest("[drop=droppable]");o!==i&&(o&&p(o),(o=i)&&g(o))}};document.addEventListener("mousemove",d);var p=function(t){var e=Number(t.getAttribute("row")),a=Number(t.getAttribute("column")),n=e-c;if(!(n<=0||n+u-2>=10)){for(var r=[],o=n;o<n+u;o++)r.push(document.querySelector('[drop="droppable"][row="'.concat(o,'"][column="').concat(a,'"]')));var i=!1;r.forEach((function(t){"gray"===t.style.backgroundColor&&(i=!0)})),i||(r.forEach((function(t){t.style.backgroundColor="#77b4ee"})),s=!1)}},g=function(t){var e=Number(t.getAttribute("row")),a=Number(t.getAttribute("column")),n=e-c;if(!(n<=0||n+u-2>=10)){for(var r=[],o=n;o<n+u;o++)r.push(document.querySelector('[drop="droppable"][row="'.concat(o,'"][column="').concat(a,'"]')));var i=!1;r.forEach((function(t){"gray"===t.style.backgroundColor&&(i=!0)})),i||(r.forEach((function(t){t.style.backgroundColor="lightGray"})),s=!0,m=r,l.row=n,l.column=a)}};document.addEventListener("mouseup",(function e(n){if(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),s){var r=t.state.counter+1;t.setState({disableRotation:!1,counter:r}),5===r&&t.setState({startGame:!0,disableRotation:!0}),a.style.display="none",t.state.human.gameboard.placeShip(t.state.human.gameboard.ships[i],t.state.orientation,l.row,l.column),m.forEach((function(t){t.style.backgroundColor="gray"}))}else a.style.position="static",a.style.opacity=1,t.setState({disableRotation:!1})}))}()},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this,e=null;this.state.startGame?e=r.a.createElement("button",{onClick:function(){return t.startGame()}},"Start Game"):this.state.currentTurn&&(e=r.a.createElement("button",{disabled:!0},"Go: ",this.state.currentTurn));var a=null;return this.state.winner&&(a={top:"0vh"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:b.a.Winner,style:a},r.a.createElement("div",null,this.state.winner," Wins"),r.a.createElement("button",{onClick:function(){return window.location.reload()}},"Restart")),r.a.createElement("div",{className:b.a.Container},r.a.createElement("div",null,r.a.createElement(R,{dragStart:this.handleDragStart,orientation:this.state.orientation,ships:this.state.human.gameboard.ships,currentTurn:this.state.currentTurn}),r.a.createElement("div",{className:b.a.Buttons},this.state.disableRotation?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:b.a.HideRotate,onClick:function(){return t.changeOrientation()}},"Rotate"),r.a.createElement("button",{onClick:function(){return t.autoPlace()}},"Auto Place")))),r.a.createElement("div",null,r.a.createElement("div",{className:b.a.Label},"Human"),r.a.createElement("div",{className:b.a.Grid},r.a.createElement(C,{grid:this.state.human.gameboard.grid}))),r.a.createElement("div",null,r.a.createElement("div",{className:b.a.Label},"Computer"),r.a.createElement("div",{className:b.a.Grid},r.a.createElement(E,{grid:this.state.computer.gameboard.grid,clickBoard:function(e){return t.clickBoard(e)}})))),r.a.createElement("div",{className:b.a.Turn},e))}}]),a}(n.Component),H=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:d.a.Top},"Battleship"),r.a.createElement(A,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.8e37b688.chunk.js.map