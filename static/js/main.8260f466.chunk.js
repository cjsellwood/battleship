(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,function(t,e,a){t.exports={Container:"Game_Container__sKSbT",Grid:"Game_Grid__Ya4sG",Label:"Game_Label__2qwWx",Turn:"Game_Turn__36u0M",Buttons:"Game_Buttons__hZqgn",HideRotate:"Game_HideRotate__1ZQFU"}},,,function(t,e,a){t.exports=a.p+"static/media/fire.a2c3772d.png"},,,function(t,e,a){t.exports={Ships:"Ships_Ships__12LO7",VerticalShips:"Ships_VerticalShips__3sTvK",HideShips:"Ships_HideShips__2C2FZ"}},function(t,e,a){t.exports={Row:"ComputerGrid_Row__dqX1G",Column:"ComputerGrid_Column__2RRpk"}},function(t,e,a){t.exports={Row:"HumanGrid_Row__bI5ZN",Column:"HumanGrid_Column__3RGyM"}},function(t,e,a){t.exports={Buttons:"ControlButtons_Buttons__2Fdgb",HideRotate:"ControlButtons_HideRotate__3q_Qm"}},,,function(t,e,a){t.exports={Top:"App_Top__1EDUa"}},function(t,e,a){t.exports={Winner:"WinnerModal_Winner__2zqyV"}},function(t,e,a){t.exports={Turn:"TurnIndicator_Turn__-5G63"}},function(t,e,a){t.exports=a(22)},,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),u=(a(21),a(2)),c=a(3),l=a(6),s=a(5),m=a(13),d=a.n(m),h=function(t){var e=1;switch(t){case"Carrier":e=5;break;case"Battleship":e=4;break;case"Destroyer":case"Submarine":e=3;break;case"PatrolBoat":e=2}var a=!1;return{getLength:function(){return e},getName:function(){return t},getPlaced:function(){return a},setPlaced:function(){a=!0}}},p=function(){for(var t={Carrier:h("Carrier"),Battleship:h("Battleship"),Destroyer:h("Destroyer"),Submarine:h("Submarine"),PatrolBoat:h("PatrolBoat")},e=[],a=0;a<10;a++)e.push(Array(10).fill(""));var n=function(t,a,n,r){if(!n||!r)return!1;if("Horizontal"===a){for(var o=0;o<t.getLength();o++){if(r-1+o>=10||r-1+o<0)return!1;if(""!==e[n-1][r-1+o])return!1}for(var i=0;i<t.getLength();i++)e[n-1][r-1+i]=t.getName()+i;return e}for(var u=0;u<t.getLength();u++){if(n-1+u>=10||n-1+u<0)return!1;if(""!==e[n-1+u][r-1])return!1}for(var c=0;c<t.getLength();c++)e[n-1+c][r-1]=t.getName()+c;return e};return{ships:t,getGrid:function(){return e},placeShip:n,receiveAttack:function(t,a){var n=e[t-1][a-1];return""===n?(e[t-1][a-1]="x","x"):"x"!==n&&"Hit"!==n&&(e[t-1][a-1]="Hit","Hit")},allSunk:function(){var t=!0;return e.forEach((function(e){e.forEach((function(e){""!==e&&"x"!==e&&"Hit"!==e&&(t=!1)}))})),t},autoPlaceShips:function(){for(var e in t)if(!t[e].getPlaced()){for(var a=null,r=null,o=Math.random()>.5?"Horizontal":"Vertical";!n(t[e],o,a,r);)a=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;t[e].setPlaced()}}}},f=function(t){var e=p(),a=[],n=function(t,e){var n=Math.random(),r=-1,o=-1;for(console.log(r,o);r<1||r>10||o<1||o>10;)n=Math.random(),r=e.row,o=e.column,n<.25?r-=1:n<.5?r+=1:n<.75?o-=1:o+=1;for(var i=t.gameboard.receiveAttack(r,o),u=0;!1===i;){for(r=-1,o=-1;r<1||r>10||o<1||o>10;)n=Math.random(),r=e.row,o=e.column,n<.25?r-=1:n<.5?r+=1:n<.75?o-=1:o+=1;if(i=t.gameboard.receiveAttack(r,o),100===(u+=1))return!1}var c={row:r,column:o,result:i};return a.push(c),i},r=function(t,e,n){var r,o=null;if(e.row===n.row)r=e.row,o=e.column>n.column?e.column+1:e.column-1;else{if(e.column!==n.column)return!1;o=e.column,r=e.row>n.row?e.row+1:e.row-1}if(r>10||r<1||o>10||o<1)return!1;var i=t.gameboard.receiveAttack(r,o),u={row:r,column:o,result:i};return a.push(u),i},o=function(t){for(var e=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1,r=t.gameboard.receiveAttack(e,n);!1===r;)e=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1,r=t.gameboard.receiveAttack(e,n);var o={row:e,column:n,result:r};return a.push(o),r};return{attack:function(t,e,a){return t.gameboard.receiveAttack(e,a)},gameboard:e,computerAttack:function(t){if(0===a.length)o(t);else if(1===a.length){var e=a[a.length-1];if("Hit"===e.result){if(!n(t,e))return void o(t)}else o(t)}else{var i=a[a.length-1],u=a[a.length-2];if("Hit"===i.result&&"Hit"===u.result){if(!r(t,i,u))return void o(t)}else if("Hit"===i.result){if(!n(t,i))return void o(t)}else o(t)}return a[a.length-1].result}}},g=a(1),v=a.n(g),b=a(8),w=a.n(b),k=a(4),_=a.n(k),y=function(t){return t.grid.map((function(e,a){return r.a.createElement("div",{key:a+1,className:w.a.Row},e.map((function(e,n){var o=[w.a.Column],i=null;return"Hit"===e&&(i={backgroundColor:"black",backgroundImage:"url(".concat(_.a,")"),backgroundSize:"cover"}),r.a.createElement("div",{onClick:function(e){return t.clickBoard(e)},row:a+1,column:n+1,key:"".concat(a," ").concat(n),className:o.join(" "),style:i},"x"===e?e:null)})))}))},S=a(9),E=a.n(S),C=function(t){return t.grid.map((function(t,e){return r.a.createElement("div",{key:e+1,className:E.a.Row},t.map((function(t,a){var n=[E.a.Column],o=null;return"Hit"===t?o={backgroundColor:"black",backgroundImage:"url(".concat(_.a,")"),backgroundSize:"cover"}:"x"!==t&&""!==t&&(o={backgroundColor:"gray"}),r.a.createElement("div",{row:e+1,column:a+1,key:"".concat(e," ").concat(a),className:n.join(" "),style:o,drop:"droppable"},"x"===t?t:null)})))}))},H=a(7),G=a.n(H),R=function(t){var e=[];for(var a in t.ships){for(var n=[],o=0;o<t.ships[a].getLength();o++)n.push(r.a.createElement("div",{name:t.ships[a].getName(),position:o,key:t.ships[a].getName()+o}));e.push(r.a.createElement("div",{onMouseDown:function(e){return t.dragStart(e)},key:t.ships[a].getName()},n))}var i=[];return i="Vertical"===t.orientation?[G.a.VerticalShips]:[G.a.Ships],null!==t.currentTurn&&i.push(G.a.HideShips),r.a.createElement("div",{className:i.join(" ")},e)},N=a(14),T=a.n(N),B=function(t){var e=null;return t.winner&&(e={top:"0vh"}),r.a.createElement("div",{className:T.a.Winner,style:e},r.a.createElement("div",null,t.winner," Wins"),r.a.createElement("button",{onClick:function(){return window.location.reload()}},"Restart"))},x=a(10),A=a.n(x),M=function(t){var e=null;return t.disableRotation||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:A.a.HideRotate,onClick:t.changeOrientation},"Rotate"),r.a.createElement("button",{onClick:t.autoPlace},"Auto Place"))),r.a.createElement("div",{className:A.a.Buttons},e)},P=a(15),L=a.n(P),z=function(t){var e=null;return t.startGame?e=r.a.createElement("button",{onClick:t.startGameHandler},"Start Game"):t.currentTurn&&(e=r.a.createElement("button",{disabled:!0},"Go: ",t.currentTurn)),r.a.createElement("div",{className:L.a.Turn},e)},O=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={human:f("Human"),computer:f("Computer"),currentTurn:null,orientation:"Horizontal",disableRotation:!1,startGame:!1,counter:0,disableStartBtn:!1,winner:null},t.clickBoard=function(e){if("Human"===t.state.currentTurn&&"x"!==e.target.textContent&&"black"!==e.target.style.backgroundColor){var a=t.state.computer,n=e.target.getAttribute("row"),r=e.target.getAttribute("column");t.state.human.attack(a,n,r)&&t.setState({computer:a,currentTurn:"Computer"}),a.gameboard.allSunk()?t.setState({winner:"Human"}):setTimeout((function(){var e=t.state.human;t.state.computer.computerAttack(e),t.setState({human:e,currentTurn:"Human"}),e.gameboard.allSunk()&&t.setState({winner:"Computer"})}),1e3)}},t.changeOrientation=function(){"Horizontal"===t.state.orientation?t.setState({orientation:"Vertical"}):t.setState({orientation:"Horizontal"})},t.startGameHandler=function(){t.setState({currentTurn:"Human",disableRotation:!0,startGame:!1,disableStartBtn:!0}),t.state.computer.gameboard.autoPlaceShips()},t.autoPlace=function(){t.state.human.gameboard.autoPlaceShips();var e=t.state.human;e.gameboard.ships=null,t.setState({startGame:!0,human:e,disableRotation:!0})},t.handleDragStart=function(e){!function(){t.setState({disableRotation:!0});var a=e.currentTarget,n=e.clientX-a.getBoundingClientRect().left;n+=.005*window.innerWidth;var r=e.clientY-a.getBoundingClientRect().top;r+=.005*window.innerWidth;var o=null,i=e.target.getAttribute("name"),u=Number(e.target.getAttribute("position")),c=t.state.human.gameboard.ships[i].getLength(),l={row:null,column:null},s=!1,m=[],d=function(t){a.style.opacity="0.6",a.style.position="absolute",a.style.left=t.pageX-n+"px",a.style.top=t.pageY-r+"px",a.style.display="none";var e=document.elementFromPoint(t.clientX,t.clientY);if(a.style.display="grid",e){var i=e.closest("[drop=droppable]");o!==i&&(o&&h(o),(o=i)&&p(o))}};document.addEventListener("mousemove",d);var h=function(e){var a=Number(e.getAttribute("row")),n=Number(e.getAttribute("column")),r=null;if(!((r="Horizontal"===t.state.orientation?n-u:a-u)<=0||r+c-2>=10)){for(var o=[],i=r;i<r+c;i++)"Horizontal"===t.state.orientation?o.push(document.querySelector('[drop="droppable"][row="'.concat(a,'"][column="').concat(i,'"]'))):o.push(document.querySelector('[drop="droppable"][row="'.concat(i,'"][column="').concat(n,'"]')));var l=!1;o.forEach((function(t){"gray"===t.style.backgroundColor&&(l=!0)})),l||(o.forEach((function(t){t.style.backgroundColor="#77b4ee"})),s=!1)}},p=function(e){var a=Number(e.getAttribute("row")),n=Number(e.getAttribute("column")),r=null;if(!((r="Horizontal"===t.state.orientation?n-u:a-u)<=0||r+c-2>=10)){for(var o=[],i=r;i<r+c;i++)"Horizontal"===t.state.orientation?o.push(document.querySelector('[drop="droppable"][row="'.concat(a,'"][column="').concat(i,'"]'))):o.push(document.querySelector('[drop="droppable"][row="'.concat(i,'"][column="').concat(n,'"]')));var d=!1;o.forEach((function(t){"gray"===t.style.backgroundColor&&(d=!0)})),d||(o.forEach((function(t){t.style.backgroundColor="lightGray"})),s=!0,m=o,"Horizontal"===t.state.orientation?(l.row=a,l.column=r):(l.row=r,l.column=n))}};document.addEventListener("mouseup",(function e(n){if(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e),s){var r=t.state.counter+1;t.setState({disableRotation:!1,counter:r}),5===r&&t.setState({startGame:!0,disableRotation:!0}),a.style.display="none",t.state.human.gameboard.placeShip(t.state.human.gameboard.ships[i],t.state.orientation,l.row,l.column);var o=t.state.human;o.gameboard.ships[i].setPlaced(),t.setState({human:o}),m.forEach((function(t){t.style.backgroundColor="gray"}))}else a.style.position="static",a.style.opacity=1,t.setState({disableRotation:!1})}))}()},t}return Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{winner:this.state.winner}),r.a.createElement("div",{className:v.a.Container},r.a.createElement("div",null,r.a.createElement(R,{dragStart:this.handleDragStart,orientation:this.state.orientation,ships:this.state.human.gameboard.ships,currentTurn:this.state.currentTurn}),r.a.createElement(M,{disableRotation:this.state.disableRotation,changeOrientation:this.changeOrientation,autoPlace:this.autoPlace})),r.a.createElement("div",null,r.a.createElement("div",{className:v.a.Label},"Human"),r.a.createElement("div",{className:v.a.Grid},r.a.createElement(C,{grid:this.state.human.gameboard.getGrid()}))),r.a.createElement("div",null,r.a.createElement("div",{className:v.a.Label},"Computer"),r.a.createElement("div",{className:v.a.Grid},r.a.createElement(y,{grid:this.state.computer.gameboard.getGrid(),clickBoard:function(e){return t.clickBoard(e)}})))),r.a.createElement(z,{startGame:this.state.startGame,startGameHandler:this.startGameHandler,currentTurn:this.state.currentTurn}))}}]),a}(n.Component),j=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:d.a.Top},"Battleship"),r.a.createElement(O,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.8260f466.chunk.js.map